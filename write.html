<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üëï</text></svg>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ïä§ÌÉÄÏùºÎ°úÍ∑∏ - ÏûëÏÑ±</title>
    <link rel="stylesheet" href="styles/write.css">
    <link rel="stylesheet" href="styles/bottom-nav.css">
</head>
<body class="has-bottom-nav">
    <!-- ÏûëÏÑ± ÌôîÎ©¥ -->
    <div class="container" id="writeView">
        <!-- Ìó§Îçî -->
        <header class="write-header">
            <button class="icon-btn cancel-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M19 12H5M12 19l-7-7 7-7"></path>
                </svg>
            </button>
            <h1 class="header-title">ÏÉà Í∏∞Î°ù</h1>
            <button class="text-btn save-btn" disabled>Ï†ÄÏû•</button>
        </header>

        <!-- Ìèº -->
        <form class="write-form" id="writeForm">
            <!-- ÎÇ†Ïßú ÏÑ†ÌÉù -->
            <div class="form-section">
                <input type="date" class="form-input date-input" id="dateInput" required>
            </div>

            <!-- ÎÇ†Ïî® Ï†ïÎ≥¥ -->
            <div class="form-section">
                <div class="weather-display" id="weatherDisplay">
                    <div class="weather-info-box">
                        <div class="weather-icon-container" id="weatherIconContainer">
                            <svg width="32" height="32" viewBox="0 0 48 48" fill="none" stroke="#999">
                                <path d="M27 18h-1.26A12 12 0 1 0 13.5 30H27a7.5 7.5 0 0 0 0-15z"></path>
                            </svg>
                        </div>
                        <div class="weather-details">
                            <div class="weather-name" id="weatherName">ÌùêÎ¶º</div>
                            <div class="weather-temp" id="weatherTemp">--¬∞C</div>
                        </div>
                    </div>
                    <div class="temp-range" id="tempRange" style="display: none;">
                        <span class="temp-max">ÏµúÍ≥† --¬∞C</span>
                        <span class="temp-min">ÏµúÏ†Ä --¬∞C</span>
                    </div>
                </div>
                <input type="hidden" id="weatherInput" name="weather" required>
                <input type="hidden" id="weatherTempInput" name="weather_temp">
                <input type="hidden" id="weatherDescInput" name="weather_description">
            </div>

            <!-- ÎÇ†Ïî®Ï†ÅÌï©ÎèÑ -->
            <div class="form-section">
                <label class="form-label">ÎÇ†Ïî®Ï†ÅÌï©ÎèÑ</label>
                <div class="weather-fit-btns" role="group">
                    <button type="button" class="weather-fit-btn" data-value="cold">cold</button>
                    <button type="button" class="weather-fit-btn active" data-value="good">good</button>
                    <button type="button" class="weather-fit-btn" data-value="hot">hot</button>
                </div>
                <input type="hidden" id="weatherFitInput" name="weather_fit" value="good">
            </div>

            <!-- ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú -->
            <div class="form-section">
                <label class="form-label">ÏÇ¨ÏßÑ (ÏÑ†ÌÉù)</label>
                <div class="photo-upload-area" id="photoUploadArea">
                    <input type="file" id="photoInput" accept="image/*" multiple style="display: none;">
                    <button type="button" class="upload-btn" onclick="document.getElementById('photoInput').click()">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <circle cx="8.5" cy="8.5" r="1.5"></circle>
                            <polyline points="21 15 16 10 5 21"></polyline>
                        </svg>
                        <span>ÏÇ¨ÏßÑ Ï∂îÍ∞Ä</span>
                    </button>
                    <div class="photo-preview-list" id="photoPreviewList"></div>
                </div>
            </div>

            <!-- Ï†úÎ™© -->
            <div class="form-section">
                <label class="form-label">Ï†úÎ™© (ÏÑ†ÌÉù)</label>
                <input type="text" class="form-input title-input" id="titleInput" placeholder="Ïò§ÎäòÏùò Ï∞©Ïû•Ïóê ÎåÄÌïú Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" maxlength="100">
            </div>

            <!-- Î≥∏Î¨∏ -->
            <div class="form-section">
                <label class="form-label">Î©îÎ™® (ÏÑ†ÌÉù)</label>
                <textarea class="form-textarea" id="contentInput" placeholder="Ïò§ÎäòÏùò Ïä§ÌÉÄÏùº, Í∏∞Î∂Ñ, ÌäπÎ≥ÑÌïú Ïùº Îì±ÏùÑ Í∏∞Î°ùÌï¥Î≥¥ÏÑ∏Ïöî..." rows="8"></textarea>
            </div>

            <!-- ÌÉúÍ∑∏ -->
            <div class="form-section">
                <label class="form-label">ÌÉúÍ∑∏ (ÏÑ†ÌÉù)</label>
                <div class="tags-input-wrapper">
                    <div class="tags-display" id="tagsDisplay"></div>
                    <input type="text" class="form-input tags-input" id="tagsInput" placeholder="#ÌÉúÍ∑∏Î•º ÏûÖÎ†•ÌïòÍ≥† ÏóîÌÑ∞">
                </div>
                <p class="form-hint">ÏóîÌÑ∞ ÎòêÎäî ÏâºÌëúÎ°ú ÌÉúÍ∑∏ Ï∂îÍ∞Ä</p>
            </div>
        </form>
    </div>

    <!-- ÌïòÎã® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Î∞î -->
    <nav class="bottom-nav">
        <a href="index.html" class="bottom-nav-item">
            <div class="bottom-nav-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
            </div>
            <span class="bottom-nav-label">Ìôà</span>
        </a>
        <a href="write.html" class="bottom-nav-item write-btn active">
            <div class="bottom-nav-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
            </div>
            <span class="bottom-nav-label">ÏûëÏÑ±</span>
        </a>
        <a href="mypage.html" class="bottom-nav-item">
            <div class="bottom-nav-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
            </div>
            <span class="bottom-nav-label">ÎßàÏù¥</span>
        </a>
    </nav>

    <script src="https://unpkg.com/@supabase/supabase-js@2" defer></script>
    <script src="scripts/config.js" defer></script>
    <script src="scripts/api.js" defer></script>
    <script src="scripts/auth.js" defer></script>
    <script src="scripts/common.js" defer></script>
    <script src="scripts/write.js" defer></script>
    <script>
        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ïù∏Ï¶ù Ï≤¥ÌÅ¨
        window.addEventListener('DOMContentLoaded', async () => {
            await requireAuth();
        });
    </script>
</body>
</html>

